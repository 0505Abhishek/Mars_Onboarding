<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <title> Admin-MARS</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <link rel="icon" type="image/x-icon" href="../images/ficon (1).png">

    <meta name="msapplication-tap-highlight" content="no">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .image-container {
            overflow: hidden;
            white-space: nowrap;
            position: relative;
        }

        .image-container .col {
            display: inline-block !important;
            vertical-align: top;
            white-space: normal;
            animation: scrollImages 8s linear infinite alternate;
        }

        @keyframes scrollImages {
            0% {
                transform: translateX(0);
            }

            150% {
                transform: translateX(-150%);
            }

            75% {
                transform: translateX(-75%);
            }

            100% {
                transform: translateX(-100%);
            }
        }


        .ICON {
            font-size: 50px;
            color: #0000a0;
        }

        .login-wrapper {
            background-color: #080678;
            background-repeat: no-repeat;
            background-size: cover;
            width: 100%;
            height: 100vh;
        }

        .login-userset {
            overflow: hidden;
            width: 100%;
            border-radius: 25px;
            padding: 5px;
            background-color: #fff;
            /* opacity: 0.8; */
            box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        }

        .login-brand-img .col {
            border-right: 1.5px solid #a1a7a2;
            height: 75px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .form-login label {
            /* width: 100%; */
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0001a4;
            font-size: 35px;
            font-weight: 500;
        }

        .form-login input {
            width: 100%;
            height: 50px;
            font-size: 16px;
            font-weight: 600;
            border: 1px solid rgba(145, 158, 171, 0.32);
            border-bottom: 8px solid #0001a4;
            border-radius: 5px;
            padding: 0 15px;
            transition: all 0.2s ease;
        }

        .form-login input:hover,
        .form-login input:focus {
            border: 1px solid #0001a4;
            border-bottom: 1px solid #0001a4;
        }

        .form-login .btn-login {
            float: inline-end;
            width: 80%;
            /* width: 50%; */
            font-size: 18px;
            letter-spacing: 4px;
            font-weight: 900;
            background: #0001a4;
            border-color: #0001a4;
            padding: 12px;
            -webkit-transition: all 0.5s ease;
            -ms-transition: all 0.5s ease;
            transition: all 0.5s ease;
            /* margin-top: 15px; */
            color: #fff;
        }

        .form-login .btn-login:hover {
            box-shadow: 0 50px #fff inset !important;
            color: #0001a4;
        }

        .mars-logo {
            width: 300px;
            border-radius: 25px;
            top: 10px;
            position: relative;
        }

        .kyc b {
            color: #080678;
            font-weight: revert !important;
        }
    </style>

<body class="login-wrapper ">
    <div>

        <% if (message) { %>
            <div class="alert">
                <p>
                    <%= message %>
                </p>
            </div>
            <% } %>
            
                <div class=" d-flex justify-content-center align-items-center">
                    <div class="container-fluid">

                        <div class="row  ">
                            <div class="col-lg-11 col-md-12 col-11 mx-auto ">
                                <div class="mt-0">
                                    <div class=" ">
                                        <img src="../images/mars-logo.svg" class="mars-logo" alt="" loading="lazy">
                                    </div>

                                    <div class="login-userset  mt-1 ">
                                        <div class="col-lg-5 col-md-7 col-10   mx-auto  z-index-0"
                                            style="height: 45vh;">
                                            <div class="login-top-icon text-center pt-2 mt-2">
                                                <i class="fa fa-user-circle ICON" aria-hidden="true"></i>
                                            </div>
                                            <div class=" text-center mb-3 ">
                                                <h1 class="kyc"><b><strong>KYC PROCESS</strong> </b> </h1>
                                            </div>

                                            <form role="form text-left" method="POST" action="/account/change-password" onsubmit="return validatePassword()">
                                                <!-- New Password field -->
                                                <div class="form-login mb-3 mx-2 d-flex justify-content-center align-items-center">
                                                    <label class="me-2 mr-2"><i class="fa fa-lock" aria-hidden="true"></i></label>
                                                    <div class="form-addons w-100 position-relative">
                                                        <input type="hidden" name="token" value="<%= token %>"/>
                                                        <input type="password" name="new_password" id="new_password" class="focus:outline-none focus:border-blue-400 focus:shadow w-100" required autofocus placeholder="New Password" oninput="validatePassword()">
                                                        <i class="fa fa-eye-slash position-absolute pe-2 cursor-pointer" id="toggleNewPassword" style="right: 10px; top: 50%; transform: translateY(-50%);"></i>
                                                    </div>
                                                </div>
                                                <p style="margin-top: -15px; padding-left: 35px;" id="validation-message1" class="text-danger"></p>
                                            
                                                <!-- Confirm Password field -->
                                                <div class="form-login mb-3 mx-2 d-flex justify-content-center align-items-center">
                                                    <label class="me-2 mr-2"><i class="fa fa-lock" aria-hidden="true"></i></label>
                                                    <div style="margin-top:20px" class="form-addons w-100 position-relative">
                                                        <input type="password" name="confirm_password" id="confirm_password" class="focus:outline-none focus:border-blue-400 focus:shadow w-100" required placeholder="Confirm Password" oninput="validatePasswordConfirm()">
                                                        <i class="fa fa-eye-slash position-absolute pe-2 cursor-pointer" id="toggleConfirmPassword" style="right: 10px; top: 50%; transform: translateY(-50%);"></i>
                                                    </div>
                                                </div>
                                                <p style="margin-top: -15px; padding-left: 35px;" id="validation-message2" class="text-danger"></p>
                                            
                                                <!-- Submit button -->
                                                <div class="row form-login my-3 mx-2">
                                                    <button style="margin-top:20px"  class="btn btn-login w-100" type="submit">Submit</button>
                                                </div>
                                            
                                                <!-- Reset password link -->
                                                <div class="text-center mt-2">
                                                    <a href="/account" class="text-muted font-weight-bold">Back To Login Page?</a>
                                                </div>
                                            </form>
                                            
                                            


                                        </div>
                                        <div class="pt-5 mt-3">
                                            <div class="row pt-5 justify-content-center align-items-center login-brand-img my-4 image-container"
                                                id="imageContainer">
                                                <div class="col">
                                                    <img src="../images/snickers.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/twix.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/doublemint.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/boomer.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/glaxy.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/orbit.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/mars.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/skittles.jpg" alt="img" class="img-fluid">
                                                </div>
                                                <div class="col">
                                                    <img src="../images/m&amp;ms.jpg" alt="img" class="img-fluid">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

    </div>
    <script src='https://code.jquery.com/jquery-1.12.4.min.js'></script>
    <script src='https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js'></script>
    <script src='https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.js'></script>
    <script src="../js/main.js"></script>


    <script>
        const messageElement = document.querySelector('.alert');
        if (messageElement) {
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 5000);
        }
        window.onload = function () {

            function cloneAndAppendImages() {
                var container = document.getElementById('imageContainer');
                var images = container.querySelectorAll('.col');
                var width = 0;

                images.forEach(function (image) {
                    width += image.offsetWidth; 
                });

                images.forEach(function (image) {
                    var clone = image.cloneNode(true);
                    container.appendChild(clone);
                });

                container.style.width = width * 2 + 'px'; 
            }

            cloneAndAppendImages(); 

            function resetScroll() {
                var container = document.getElementById('imageContainer');
                var scrollPosition = container.scrollLeft;

                if (scrollPosition >= container.scrollWidth / 2) {
                    container.scrollLeft = 0; 
                }
            }

            setInterval(resetScroll, 8); 
        };



    </script>

    <script>
        const MIN_PASSWORD_LENGTH = 12;
        
        function validatePassword() {
            const password = document.getElementById('new_password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            const validationMessage1 = document.getElementById('validation-message1');
            const validationMessage2 = document.getElementById('validation-message2');

            
            validationMessage1.textContent = '';
            validationMessage2.textContent = '';

            const complexityRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).{12,}$/;
            if (!complexityRegex.test(password)) {
                validationMessage1.textContent = "Password must include at least one uppercase letter, one lowercase letter, one number, one special character and length should be 12 .";
                return false;
            }

            return true; 
        }
    
        function validatePasswordConfirm() {
            const password = document.getElementById('new_password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            const validationMessage2 = document.getElementById('validation-message2');

            validationMessage2.textContent = '';

            if (password !== confirmPassword) {
            validationMessage2.textContent = "Passwords do not match.";
            return false;
           }

            return true; 
        }
    
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleNewPassword = document.getElementById('toggleNewPassword');
            const newPasswordField = document.getElementById('new_password');
            toggleNewPassword.addEventListener('click', function() {
                const type = newPasswordField.type === 'password' ? 'text' : 'password';
                newPasswordField.type = type;
                this.classList.toggle('fa-eye');
                this.classList.toggle('fa-eye-slash');
            });

            const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
            const confirmPasswordField = document.getElementById('confirm_password');
            toggleConfirmPassword.addEventListener('click', function() {
                const type = confirmPasswordField.type === 'password' ? 'text' : 'password';
                confirmPasswordField.type = type;
                this.classList.toggle('fa-eye');
                this.classList.toggle('fa-eye-slash');
            });
        });
    </script>


</body>

</html>